<link rel="import" href="../bower_components/polymer/polymer.html">


<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-form/iron-form.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<dom-module id="category-admin-list">

    <template>
        <iron-list items="{{categoryList}}" as="category">
            <template>
                <paper-card heading="[[category.name]]" elevation="3">
                    <iron-icon class="deleteIcon" icon="delete" on-click="submitForm"></iron-icon>
                    <div class="card-content">
                        <div class="layout horizontal wrap">
                            <div>
                                <div>[[category.description]]</div>
                                <div class="info">[[category.updateDate]]</div>
                            </div>
                            <iron-image sizing="contains" src="[[category.imagePath]]" ></iron-image>
                        </div>
                    </div>
                    <paper-fab mini icon="create"></paper-fab>
                </paper-card>
            </template>
        </iron-list>
        <form is="iron-form" id="hiddenForm"  method="post" enctype="text/plain">
            <input type="hidden"  id="categoryId" name="catId"/>
        </form>
    </template>

    <style>
        iron-image{
            width:80px;
            height:80px;
            margin-left :15px;
        }

        .info {
            font-style: italic;
            font-size: 14px;
            color: #696969;
            padding-top: 0;
            padding-bottom: 0;
        }

        paper-fab {
            position: absolute;
            bottom: 3vh;
            right: 3vw;
            background: #4DD0E1;
        }

        .deleteIcon {
            float: right;
            margin: 2vh 2vw;
        }


    </style>

    <style include="iron-flex iron-flex-alignment">
    </style>

    <script>

        Polymer({
            is: 'category-admin-list',
            properties: {
                categoryList: Array,
                postPath :String
            },
            submitForm : function (element) {
                var hiddenForm = document.getElementById('hiddenForm');
                hiddenForm.action = this.postPath + '/delete';
                var idToDelete = element.model.category.id;
                document.getElementById('categoryId').setAttribute("value", idToDelete);
                hiddenForm.submit();
                //this.$.hiddenForm.submit();
            }
        });
    </script>

</dom-module>