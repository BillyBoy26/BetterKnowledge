<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="../bk_components/connection-popup.html">


<dom-module id="bk-toolbar">
    <template>
        <paper-toolbar>
            <span class="title">Better Knowledge</span>
            <span>{{displayName(user)}}</span>
            <connection-popup></connection-popup>
            <paper-menu-button id="loggedMenu">
                <paper-icon-button icon="menu" class="dropdown-trigger"></paper-icon-button>
                <paper-menu class="dropdown-content">
                    <paper-item>
                        <a href="/logout">Logout</a>
                    </paper-item>
                </paper-menu>
            </paper-menu-button>

        </paper-toolbar>
    </template>

    <style>

    </style>

    <script>

        Polymer({
            is: 'bk-toolbar',
            properties:{
                isAuthenticated : {
                    type :Boolean,
                    reflectToAttribute :true
                },
                user : {
                    type:Object
                }
            },
            displayName : function(user){
                alert(user);
                if(user) {
                    return user.displayName;
                }
            },
            ready: function() {
                if(this.isAuthenticated){
                    this.$$('connection-popup').style.display = 'none';
                    this.$$('#loggedMenu').style.display = 'block';
                }else {
                    this.$$('connection-popup').style.display = 'block';
                    this.$$('#loggedMenu').style.display = 'none';
                }

            }
        });
    </script>

</dom-module>


