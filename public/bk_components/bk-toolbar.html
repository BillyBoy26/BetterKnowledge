<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../bower_components/paper-item/paper-icon-item.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../bk_components/connection-popup.html">


<dom-module id="bk-toolbar">
    <template>
        <paper-toolbar>
            <!-- content sert pour l'icon de menu dans admin.ejs, peut être à changer plus tard-->
            <content></content>
            <span class="title">Better Knowledge</span>
            <span>{{displayName(user)}}</span>
            <connection-popup></connection-popup>
            <!-- TODO jouer avec les offset pour faire un truc beau -->
            <paper-menu-button id="loggedMenu" horizontal-align="right" vertical-align="top" horizontal-offset="0" vertical-offset="0">
                <paper-icon-button icon="menu"  class="dropdown-trigger"></paper-icon-button>
                <paper-menu class="dropdown-content" >
                    <a href="/">
                        <paper-icon-item>
                            <iron-icon icon="home" item-icon></iron-icon>
                            Accueil
                        </paper-icon-item>
                    </a>
                    <a href="/admin">
                        <paper-icon-item>
                            <iron-icon icon="forward" item-icon></iron-icon>
                            Administration
                        </paper-icon-item>
                    </a>
                    <a href="/logout">
                        <paper-icon-item>
                            <iron-icon icon="exit-to-app" item-icon></iron-icon>
                            Se déconnecter
                        </paper-icon-item>
                    </a>
                </paper-menu>
            </paper-menu-button>

        </paper-toolbar>
    </template>

    <style>
        :host{

        }
    </style>

    <style include="iron-flex iron-flex-alignment">
    </style>

    <script>

        Polymer({
            is: 'bk-toolbar',
            properties:{
                isAuthenticated : {
                    type :Boolean,
                    reflectToAttribute :true
                },
                user : {
                    type:Object
                }
            },
            displayName : function(user){
                if(user) {
                    return user.displayName;
                }
            },
            ready: function() {
                if(this.isAuthenticated){
                    this.$$('connection-popup').style.display = 'none';
                    this.$$('#loggedMenu').style.display = 'block';
                }else {
                    this.$$('connection-popup').style.display = 'block';
                    this.$$('#loggedMenu').style.display = 'none';
                }

            }
        });
    </script>

</dom-module>


